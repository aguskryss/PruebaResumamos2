@using Proyectofinal.Models
@model Buscador
@{
    ViewBag.Title = "Home Page";
    ViewBag.ano = BD.TraerAños();
    ViewBag.esc = BD.TraerEscuelas();
    ViewBag.mat = BD.TraerMateria();
    int cantres = 0;
}
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="~/Content/Site.css" rel="stylesheet" type="text/css">
    <title>Resumamos</title>
</head>
<body>
    <style>
        .fondoo {
            background-color: gray;
            color: white;
        }
        .fab .fa-whatsapp{
            color:green !important;
        }
    </style>
    <div class="container">
        <!-- Header -->
        <!-- Hero Section -->

        <br />
        <br />
   


        <!-- Stats Gallery Section -->





        @using (Html.BeginForm("Buscar", "Home", FormMethod.Post))
        {
            <center>

                <form class="form-horizontal">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-3"></div>
                            <div class="col-lg-5 col-8">
                                <input type="search" class="form-control insertarTxtBusq" placeholder="Buscar resumen" style="box-shadow: 0 2px 5px -2px black;"
                                       @Html.TextBoxFor(model => model.txt, new { @class = "input100" })

                            </div>
                            <div class="col-lg-2 col-4">
                                <button type="submit" class="btn btn-primary ">Buscar </button>
                                @Html.HiddenFor(model => model.idEsc, -1)
                            </div>
                            <div class="col-lg-2">

                                @foreach (Escuela e in ViewBag.esc)
                                {

                                    <a class="dropdown-item" href="@Url.Action("TraerEsc", "Home", new { Id = e.IdEscuela })">@e.NombreEscuela</a>

                                }


                            </div>
                        </div>
                    </div>
                </form>
            </center>
        }




        <div class="content content-shadow1">
            <div class="size_mother">
                @if (ViewBag.i == 0)
                {
                    <h3 class="Titulo">Resultados de busqueda</h3>

                }
                else
                {
                    <h3 class="Titulo">Los mejores resumenes</h3>
                }
                <div class="col1 pt-2 clear" style=" border-bottom:#d2d2d2 1px solid; padding-bottom:40px; ">
                    <div class="col1_2 fl l-2 clear">
                        <div class="container-">
                            <div class="row">
                                @if (ViewBag.i == 0)
                                {
                                    <div class="col-4 col-lg-2">
                                        <br />
                                        <br />
                                        <div class="container" style="background-color: gainsboro;">
                                            <div class="row">
                                                <div class="col-12">
                                                    <b>Escuelas</b> <br />
                                                    @foreach (Escuela e in ViewBag.esc)
                                                    {
                                                        <a href="@Url.Action("FiltrarEsc", "Home", new { Id = e.IdEscuela, BusquedaAnterio = ViewBag.TextoBuscado })">
                                                            <small style="color: black">@e.NombreEscuela</small>
                                                        </a>
                                                        <br />
                                                    }
                                                    <!--
                                                    <a href="@Url.Action("FiltrarEsc", "Home", new { Id = 2, BusquedaAnterio = ViewBag.TextoBuscado })">
                                                        <small style="color: black">Buber</small>
                                                    </a>
                                                    <br />
                                                    <a href="@Url.Action("FiltrarEsc", "Home", new { Id = 3, BusquedaAnterio = ViewBag.TextoBuscado })">
                                                        <small style="color: black">Sholem</small>
                                                    </a>
                                                    <br />
                                                        -->
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-12">
                                                    <br />
                                                    <br />
                                                    <b>Años</b> <br />
                                                    @foreach (Año a in ViewBag.ano)
                                                    {
                                                        <a href="@Url.Action("FiltrarAno", "Home", new { Id = a.a, BusquedaAnterio = ViewBag.TextoBuscado })">
                                                            <small style="color: black">@a.escri</small>
                                                        </a>
                                                        <br />
                                                    }
                                                    <!--
                                                    <a href="@Url.Action("FiltrarAno", "Home", new { Id = 1 })">
                                                        <small style="color: black">1er año</small>
                                                    </a>
                                                    <br />
                                                    <a href="@Url.Action("FiltrarAno", "Home", new { Id = 2 })">
                                                        <small style="color: black">2do año</small>
                                                    </a>
                                                    <br />
                                                    <a href="@Url.Action("FiltrarAno", "Home", new { Id = 3 })">
                                                        <small style="color: black">3er año</small>
                                                    </a>
                                                    <br />
                                                    <a href="@Url.Action("FiltrarAno", "Home", new { Id = 4 })">
                                                        <small style="color: black">4to año</small>
                                                    </a>
                                                    <br />
                                                    <a href="@Url.Action("FiltrarAno", "Home", new { Id = 5 })">
                                                        <small style="color: black">5to año</small>
                                                    </a>
                                                    <br />
                                                        -->
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-12">
                                                    <br />
                                                    <br />
                                                    <b>Materias</b> <br />
                                                    @foreach (Materia mat in ViewBag.mat)
                                                    {
                                                        <a href="@Url.Action("FiltrarMat", "Home", new { Id = mat.IdMateria, BusquedaAnterio = ViewBag.TextoBuscado })">
                                                            <small style="color: black">@mat.NombreMateria</small>
                                                        </a>
                                                        <br />
                                                    }
                                                    <br />
                                                    <br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-8 col-lg-10">
                                        <div class="container fondito">
                                            <div class="row">

                                                @foreach (Resumenes res in ViewBag.lista)
                                                {


                                                    <div class="col-lg-4 col-12 col-xs-12">
                                                        <div class="card" style="box-shadow: 0 2px 10px -2px black;">
                                                            <div class="card-body">
                                                                <h4 class="card-title alert-info">@res.Nombre</h4>
                                                                <p class="card-text">@BD.TraerMateriaxId(res.FkMateria).NombreMateria</p>
                                                                <p class="card-text">@BD.TraerEscuelaxId(res.FkEscuela).NombreEscuela</p>
                                                                <p class="card-text">@BD.TraerAñoXid(res.Ano).escri</p>
                                                                <p class="card-text">Puntuacion: @res.Puntuacion</p>
                                                                <p class="card-text"> Autor: @BD.TraerAutorResumen(res.IdResumen).Nombre @BD.TraerAutorResumen(res.IdResumen).Apellido</p>
                                                                <div class="verMas">
                                                                    <a href="@Url.Action("Resumen", "Home", new { Id = res.IdResumen })" class="btn-sm btn-dark"><b>Ver mas</b></a>
                                                                </div>


                                                            </div>
                                                        </div>
                                                    </div>

                                                }

                                            </div>
                                        </div>
                                    </div>
                                }
                                else
                                {
                            <div class="col-12 col-lg-12 col-xs-12">
                                <div class="container fondito">
                                    <div class="row" id="tode">

                                        @foreach (Resumenes res in ViewBag.lista)
                                        {
                                            cantres++;
                                            
                                            <div class="col-lg-3 col-12 col-xs-12">
                                                <div class="card" style="box-shadow: 0 2px 10px -2px black;">
                                                    <div class="card-body">
                                                        <h4 class="card-title alert-info">@res.Nombre</h4>
                                                        <p class="card-text">@BD.TraerMateriaxId(res.FkMateria).NombreMateria</p>
                                                        <p class="card-text">@BD.TraerEscuelaxId(res.FkEscuela).NombreEscuela</p>
                                                        <p class="card-text">@BD.TraerAñoXid(res.Ano).escri</p>
                                                        <p class="card-text">Puntuacion: @res.Puntuacion</p>
                                                        <p class="card-text"> Autor: @BD.TraerAutorResumen(res.IdResumen).Nombre @BD.TraerAutorResumen(res.IdResumen).Apellido</p>

                                                        <div class="verMas">
                                                            <a href="@Url.Action("Resumen", "Home", new { Id = res.IdResumen })" class="btn-sm btn-dark"><b>Ver mas</b></a>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>

                                        }

                                    </div>
                                </div>
                                <center>
                                    <div class="row">
                                        <div class="col-4"></div>
                                        <div class="col-1">
                                            @if (ViewBag.pag != 1)
                                            {
                                                <a href="@Url.Action("PaginaAnterior", "Home", new { id = ViewBag.pag })">
                                                    <h3><i class="fas fa-arrow-left"></i></h3>
                                                </a>
                                            }
                                            else
                                            {
                                                <a href="#">
                                                    <h3><i class="fas fa-arrow-left" style="color:gray;"></i></h3>
                                                </a>
                                            }
                                        </div>
                                        <div class="col-2">
                                            <h3>@ViewBag.pag</h3>
                                        </div>
                                        <div class="col-1">
                                            @if (cantres == 16)
                                            {
                                                <a href="@Url.Action("PaginaSiguiente", "Home", new { id = ViewBag.pag })">
                                                    <h3><i class="fas fa-arrow-right"></i></h3>
                                                </a>
                                            }
                                            else
                                            {
                                                <a href="#">
                                                    <h3><i class="fas fa-arrow-right" style="color:gray;"></i></h3>
                                                </a>
                                            }
                                        </div>
                                        <div class="col-4"></div>
                                    </div>
                                </center>
                            </div>
                                    <br />
                                    <br />

                                    
                                }

                            </div>
                        </div>


                    </div>

                </div>
            </div>

        </div>


    </div>







    <!-- Footer Section -->
    <!-- Copyrights Section -->
    <!-- Main Container Ends -->
</body>
</html>